"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@moveable";
exports.ids = ["vendor-chunks/@moveable"];
exports.modules = {

/***/ "(ssr)/./node_modules/@moveable/helper/dist/helper.esm.js":
/*!**********************************************************!*\
  !*** ./node_modules/@moveable/helper/dist/helper.esm.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Child: () => (/* binding */ Child),\n/* harmony export */   GroupArrayChild: () => (/* binding */ GroupArrayChild),\n/* harmony export */   GroupManager: () => (/* binding */ GroupManager),\n/* harmony export */   GroupSingleChild: () => (/* binding */ GroupSingleChild),\n/* harmony export */   toTargetList: () => (/* binding */ toTargetList)\n/* harmony export */ });\n/* harmony import */ var _daybrush_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @daybrush/utils */ \"(ssr)/./node_modules/@daybrush/utils/dist/utils.esm.js\");\n/*\nCopyright (c) Daybrush\nname: @moveable/helper\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/moveable/blob/master/packages/helper\nversion: 0.1.3\n*/\n\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nfunction __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nvar Child =\n/*#__PURE__*/\nfunction () {\n  function Child(parent) {\n    this.parent = parent;\n    this.type = \"single\";\n    this.depth = 0;\n    this._scope = [];\n\n    if (parent) {\n      this.depth = parent.depth + 1;\n    }\n  }\n\n  var __proto = Child.prototype;\n  Object.defineProperty(__proto, \"scope\", {\n    get: function () {\n      var parent = this.parent;\n\n      if (!parent || parent.type === \"root\") {\n        return [];\n      }\n\n      return __spreadArray(__spreadArray([], parent.scope, true), [parent.id], false);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return Child;\n}();\n\nvar GroupSingleChild =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(GroupSingleChild, _super);\n\n  function GroupSingleChild(parent, value) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.value = value;\n    _this.type = \"single\";\n    return _this;\n  }\n\n  return GroupSingleChild;\n}(Child);\n\nvar GroupArrayChild =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(GroupArrayChild, _super);\n\n  function GroupArrayChild() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = \"group\";\n    _this.value = [];\n    _this.id = \"\";\n    _this.map = new Map();\n    return _this;\n  }\n\n  var __proto = GroupArrayChild.prototype;\n\n  __proto.compare = function (groups, checker) {\n    if (checker === void 0) {\n      checker = 0;\n    }\n\n    var elements = (0,_daybrush_utils__WEBPACK_IMPORTED_MODULE_0__.deepFlat)(groups);\n    var map = this.map;\n    var elementsLength = elements.length;\n    var mapSize = map.size;\n    var sizeDiff = mapSize - elementsLength; // 1 this > groups\n    // 0 this = groups\n    // -1 this < groups\n\n    var count = elements.filter(function (element) {\n      return map.has(element);\n    }).length;\n\n    if (checker > 0 && sizeDiff >= 0 || checker === 0 && sizeDiff === 0) {\n      return elementsLength === count;\n    } else if (checker < 0 && sizeDiff <= 0) {\n      return mapSize === count;\n    }\n\n    return false;\n  };\n\n  __proto.has = function (target) {\n    return this.map.has(target);\n  };\n\n  __proto.contains = function (element) {\n    if (this.has(element)) {\n      return true;\n    }\n\n    return this.value.some(function (child) {\n      if (child.type === \"group\") {\n        return child.contains(element);\n      } else {\n        return false;\n      }\n    });\n  };\n\n  __proto.findContainedChild = function (element) {\n    return (0,_daybrush_utils__WEBPACK_IMPORTED_MODULE_0__.find)(this.value, function (child) {\n      if (child.type === \"single\") {\n        return child.value === element;\n      } else {\n        return child.contains(element);\n      }\n    });\n  };\n  /**\n   * Exact group containing targets\n   */\n\n\n  __proto.findExactChild = function (target) {\n    var map = this.map;\n\n    if (!(0,_daybrush_utils__WEBPACK_IMPORTED_MODULE_0__.isArray)(target)) {\n      return map.get(target);\n    }\n\n    var flatted = (0,_daybrush_utils__WEBPACK_IMPORTED_MODULE_0__.deepFlat)(target);\n    var length = flatted.length;\n    var single = map.get(flatted[0]);\n\n    if (!single) {\n      return;\n    }\n\n    var parent = single.parent;\n\n    while (parent) {\n      if (parent.map.size >= length) {\n        return parent;\n      }\n\n      parent = parent.parent;\n    }\n\n    return;\n  };\n\n  __proto.findCommonParent = function (targets) {\n    var _this = this;\n\n    var depth = Infinity;\n    var childs = targets.map(function (target) {\n      return _this.findExactChild(target);\n    });\n    childs.forEach(function (child) {\n      if (!child) {\n        return;\n      }\n\n      depth = Math.min(child.depth, depth);\n    });\n\n    var _loop_1 = function () {\n      --depth;\n      childs = childs.map(function (child) {\n        var parent = child;\n\n        while (parent && parent.depth !== depth) {\n          parent = parent.parent;\n        }\n\n        return parent;\n      });\n      var firstChild = childs.find(function (child) {\n        return child;\n      });\n\n      if (!firstChild) {\n        return {\n          value: this_1\n        };\n      }\n\n      if (childs.every(function (child) {\n        return !child || child === firstChild;\n      })) {\n        return \"break\";\n      }\n    };\n\n    var this_1 = this;\n\n    while (depth) {\n      var state_1 = _loop_1();\n\n      if (typeof state_1 === \"object\") return state_1.value;\n      if (state_1 === \"break\") break;\n    }\n\n    var commonParent = childs.find(function (child) {\n      return child;\n    });\n    return commonParent || this;\n  };\n\n  __proto.findNextChild = function (target, range, isExact) {\n    var _this = this;\n\n    if (range === void 0) {\n      range = this.toTargetGroups();\n    }\n\n    if (isExact === void 0) {\n      isExact = true;\n    }\n\n    var nextChild = null;\n    var length = range.length;\n    range.some(function (child) {\n      if (!isExact && length === 1 && (0,_daybrush_utils__WEBPACK_IMPORTED_MODULE_0__.isArray)(child)) {\n        nextChild = _this.findNextChild(target, child);\n        return nextChild;\n      }\n\n      var nextGroupChild = _this.findExactChild(child);\n\n      if (!nextGroupChild) {\n        return;\n      }\n\n      if (\"map\" in nextGroupChild) {\n        if (nextGroupChild.map.has(target)) {\n          nextChild = nextGroupChild;\n          return true;\n        }\n      }\n    });\n    return nextChild;\n  };\n\n  __proto.findNextExactChild = function (target, selected, range) {\n    if (range === void 0) {\n      range = this.toTargetGroups();\n    } // [[1, 2]] => group([1, 2]) exact\n    // [[[1, 2], 3]] => group([1, 2])\n\n\n    var nextChild = this.findNextChild(target, range, true);\n\n    if (!nextChild) {\n      return null;\n    }\n\n    if (nextChild.compare(selected, -1)) {\n      return nextChild;\n    }\n\n    return null;\n  };\n  /**\n   * Finds a group that does not overlap within the range and includes the target.\n   */\n\n\n  __proto.findPureChild = function (target, range) {\n    var _this = this;\n\n    var nextGroupChild = null;\n    var childSelected = range.filter(function (element) {\n      return _this.has(element);\n    });\n\n    if (!childSelected.length) {\n      return this;\n    }\n\n    this.value.some(function (nextChild) {\n      if (nextChild.type !== \"single\" && nextChild.has(target)) {\n        nextGroupChild = nextChild.findPureChild(target, childSelected);\n\n        if (nextGroupChild) {\n          return true;\n        }\n      }\n    });\n    return nextGroupChild;\n  };\n\n  __proto.findNextPureChild = function (target, range) {\n    var nextChild = this.findNextChild(target);\n\n    if (nextChild) {\n      return nextChild.findPureChild(target, range);\n    }\n\n    return null;\n  };\n\n  __proto.toTargetGroups = function () {\n    return this.value.map(function (child) {\n      if (child.type === \"single\") {\n        return child.value;\n      } else {\n        return child.toTargetGroups();\n      }\n    });\n  };\n\n  __proto.findArrayChild = function (targets) {\n    var value = this.value;\n    var result = false;\n\n    if (this.type !== \"root\") {\n      result = value.every(function (child) {\n        if (child.type === \"single\") {\n          return targets.some(function (target) {\n            return child.value === target;\n          });\n        } else {\n          return targets.some(function (target) {\n            return (0,_daybrush_utils__WEBPACK_IMPORTED_MODULE_0__.isArray)(target) && child.findArrayChild(target);\n          });\n        }\n      }); // result = targets.every(target => {\n      //     if (isArray(target)) {\n      //         return value.some(child => {\n      //             return child.type === \"group\" && child.findArrayChild(target);\n      //         });\n      //     } else {\n      //         return map.get(target);\n      //     }\n      // });\n    }\n\n    if (result && targets.length === value.length) {\n      return this;\n    } else {\n      var childResult_1 = null;\n      value.some(function (child) {\n        if (child.type === \"group\") {\n          childResult_1 = child.findArrayChild(targets);\n          return childResult_1;\n        }\n      });\n      return childResult_1;\n    }\n  };\n\n  __proto.groupByPerfect = function (selected) {\n    return this.value.filter(function (child) {\n      if (child.type !== \"single\") {\n        return child.compare(selected, -1);\n      }\n\n      return selected.indexOf(child.value) > -1;\n    });\n  };\n\n  __proto.add = function (targets) {\n    var _this = this;\n\n    var _a = this,\n        value = _a.value,\n        map = _a.map;\n\n    var depth = this.depth;\n    targets.forEach(function (child) {\n      if (\"groupId\" in child) {\n        var group = new GroupArrayChild(_this);\n        group.id = child.groupId;\n        group.depth = depth + 1;\n        value.push(group);\n        group.add(child.children);\n      } else if ((0,_daybrush_utils__WEBPACK_IMPORTED_MODULE_0__.isArray)(child)) {\n        var group = new GroupArrayChild(_this);\n        group.depth = depth + 1;\n        value.push(group);\n        group.add(child);\n      } else {\n        var element = \"current\" in child ? child.current : child;\n        var single = new GroupSingleChild(_this, element);\n        single.depth = depth + 1;\n        value.push(single);\n        map.set(element, single);\n      }\n    });\n    value.forEach(function (child) {\n      if (child.type === \"single\") {\n        map.set(child.value, child);\n      } else {\n        child.map.forEach(function (nextChild, element) {\n          map.set(element, nextChild);\n        });\n      }\n    });\n    return parent;\n  };\n\n  return GroupArrayChild;\n}(Child);\n\nfunction toTargetList(raw) {\n  function targets(childs) {\n    if (childs === void 0) {\n      childs = [];\n    }\n\n    var arr = [];\n    childs.forEach(function (child) {\n      if (child.type === \"single\") {\n        arr.push(child.value);\n      } else {\n        arr.push(targets(child.value));\n      }\n    });\n    return arr;\n  }\n\n  return {\n    raw: function () {\n      return raw;\n    },\n    targets: function () {\n      return targets(this.raw());\n    },\n    flatten: function () {\n      return (0,_daybrush_utils__WEBPACK_IMPORTED_MODULE_0__.deepFlat)(this.targets());\n    }\n  };\n}\n\nvar GroupManager =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(GroupManager, _super);\n\n  function GroupManager(targetGroups, targets) {\n    var _this = _super.call(this) || this;\n\n    _this.type = \"root\";\n    _this._targets = [];\n\n    _this.set(targetGroups, targets);\n\n    return _this;\n  }\n\n  var __proto = GroupManager.prototype;\n\n  __proto.set = function (targetGroups, targets) {\n    var _this = this;\n\n    if (targets === void 0) {\n      targets = [];\n    }\n\n    this.map = new Map();\n    this.value = [];\n    var map = this.map;\n    var value = this.value;\n    this.add(targetGroups);\n    targets.forEach(function (target) {\n      if (map.has(target)) {\n        return;\n      }\n\n      var single = new GroupSingleChild(_this, target);\n      single.depth = 1;\n      value.push(single);\n      map.set(target, single);\n    });\n    this._targets = targets;\n  };\n\n  __proto.selectSubChilds = function (targets, target) {\n    var root = this;\n    var nextChild = root.findNextChild(target, targets, false);\n    var targetChild = root.map.get(target);\n    var nextChilds = [];\n\n    if (nextChild) {\n      nextChilds = [nextChild];\n    } else if (targetChild) {\n      nextChilds = [targetChild];\n    } else {\n      nextChilds = [];\n    }\n\n    return toTargetList(nextChilds);\n  };\n\n  __proto.selectSingleChilds = function (targets, added, removed) {\n    var nextTargets = __spreadArray([], targets, true); // group can't be added, removed.\n\n\n    removed.forEach(function (element) {\n      var index = nextTargets.indexOf(element);\n\n      if (index > -1) {\n        nextTargets.splice(index, 1);\n      }\n    }); // Targets can be added one by one\n\n    added.forEach(function (element) {\n      nextTargets.push(element);\n    });\n    return toTargetList(this.toChilds(nextTargets));\n  };\n\n  __proto.selectCompletedChilds = function (targets, added, removed, continueSelect) {\n    var _this = this;\n\n    var nextTargets = __spreadArray([], targets, true);\n\n    var startSelected = (0,_daybrush_utils__WEBPACK_IMPORTED_MODULE_0__.deepFlat)(nextTargets); // group can be added, removed.\n\n    removed.forEach(function (element) {\n      // Single Target\n      var index = nextTargets.indexOf(element);\n\n      if (index > -1) {\n        // single target or group\n        nextTargets.splice(index, 1);\n        return;\n      } // Group Target\n\n\n      var removedChild = continueSelect // Finds the nearest child for element and nextTargets.\n      ? _this.findNextChild(element, nextTargets) // Find the nearest exact child for element, all removed and nextTargets.\n      : _this.findNextExactChild(element, removed, nextTargets);\n\n      if (removedChild) {\n        var groupIndex = nextTargets.findIndex(function (target) {\n          return (0,_daybrush_utils__WEBPACK_IMPORTED_MODULE_0__.isArray)(target) && removedChild.compare(target);\n        });\n\n        if (groupIndex > -1) {\n          nextTargets.splice(groupIndex, 1);\n        }\n      }\n    });\n    added.forEach(function (element) {\n      var parentGroup = _this._findParentGroup(element, startSelected);\n\n      var nextChild = parentGroup.findContainedChild(element);\n\n      if ((nextChild === null || nextChild === void 0 ? void 0 : nextChild.type) === \"group\") {\n        nextTargets.push(nextChild.toTargetGroups());\n        return;\n      }\n\n      nextTargets.push(element);\n    });\n    return toTargetList(this.toChilds(nextTargets));\n  };\n\n  __proto.selectSameDepthChilds = function (targets, added, removed, continueSelect) {\n    var nextTargets = __spreadArray([], targets, true);\n\n    var commonParent = this.findCommonParent(nextTargets);\n    removed.forEach(function (element) {\n      // Single Target\n      var index = nextTargets.indexOf(element);\n\n      if (index > -1) {\n        // single target or group\n        nextTargets.splice(index, 1);\n        return;\n      }\n\n      var removedChild = continueSelect // Find the nearest exact child for element, all removed and nextTargets.\n      ? commonParent.findNextExactChild(element, removed, nextTargets) // Finds the nearest child for element and nextTargets.\n      : commonParent.findNextChild(element, nextTargets, true);\n\n      if (removedChild) {\n        var groupIndex = nextTargets.findIndex(function (target) {\n          return (0,_daybrush_utils__WEBPACK_IMPORTED_MODULE_0__.isArray)(target) && removedChild.compare(target);\n        });\n\n        if (groupIndex > -1) {\n          nextTargets.splice(groupIndex, 1);\n        }\n      }\n    });\n    var addedChildren = commonParent.groupByPerfect(added);\n    addedChildren.forEach(function (child) {\n      if (child.type === \"single\") {\n        nextTargets.push(child.value);\n      } else {\n        var groupIndex = nextTargets.findIndex(function (target) {\n          return (0,_daybrush_utils__WEBPACK_IMPORTED_MODULE_0__.isArray)(target) && child.compare(target, 1);\n        });\n\n        if (groupIndex > -1) {\n          nextTargets.splice(groupIndex, 1);\n        }\n\n        nextTargets.push(child.toTargetGroups());\n      }\n    });\n    return toTargetList(this.toChilds(nextTargets));\n  };\n\n  __proto.toChilds = function (targets) {\n    var _this = this;\n\n    var childs = [];\n    targets.forEach(function (target) {\n      if ((0,_daybrush_utils__WEBPACK_IMPORTED_MODULE_0__.isArray)(target)) {\n        var arrayChild = _this.findArrayChild(target);\n\n        if (arrayChild) {\n          childs.push(arrayChild);\n        }\n      } else {\n        var single = _this.map.get(target);\n\n        if (single) {\n          childs.push(single);\n        } else {\n          childs.push(new GroupSingleChild(_this, target));\n        }\n      }\n    });\n    return childs;\n  };\n\n  __proto.toSingleChild = function (element, isAuto) {\n    var value = this.map.get(element);\n\n    if (isAuto) {\n      return value || new GroupSingleChild(this, element);\n    }\n\n    return value;\n  };\n\n  __proto.findArrayChildById = function (id) {\n    var value = null;\n    this.value.some(function find(child) {\n      if (child.type !== \"single\") {\n        if (child.id === id) {\n          value = child;\n          return true;\n        } else {\n          return child.value.some(find);\n        }\n      }\n    });\n    return value;\n  };\n\n  __proto.group = function (targets, flatten) {\n    var _this = this;\n\n    var commonParent = this.findCommonParent(targets);\n    var groupChilds = targets.map(function (target) {\n      if ((0,_daybrush_utils__WEBPACK_IMPORTED_MODULE_0__.isArray)(target)) {\n        return _this.findArrayChild(target);\n      }\n\n      return _this.toSingleChild(target);\n    });\n    var isGroupable = groupChilds.every(function (child) {\n      return (child === null || child === void 0 ? void 0 : child.parent) === commonParent;\n    });\n\n    if (!isGroupable) {\n      return null;\n    }\n\n    var group = new GroupArrayChild(commonParent);\n    var nextChilds = commonParent.value.filter(function (target) {\n      return groupChilds.indexOf(target) === -1;\n    });\n    nextChilds.unshift(group);\n    group.add(flatten ? (0,_daybrush_utils__WEBPACK_IMPORTED_MODULE_0__.deepFlat)(targets) : targets);\n    commonParent.value = nextChilds;\n    this.set(this.toTargetGroups(), this._targets);\n    return group.toTargetGroups();\n  };\n\n  __proto.ungroup = function (targets) {\n    var _this = this;\n\n    if (targets.length === 1 && (0,_daybrush_utils__WEBPACK_IMPORTED_MODULE_0__.isArray)(targets[0])) {\n      targets = targets[0];\n    }\n\n    var commonParent = this.findCommonParent(targets);\n    var groupChilds = targets.map(function (target) {\n      if ((0,_daybrush_utils__WEBPACK_IMPORTED_MODULE_0__.isArray)(target)) {\n        return _this.findArrayChild(target);\n      }\n\n      return _this.toSingleChild(target);\n    });\n    var isGroupable = commonParent.value.every(function (child) {\n      return groupChilds.indexOf(child) > -1;\n    });\n\n    if (!isGroupable || commonParent === this) {\n      // has no group\n      return null;\n    }\n\n    var parent = commonParent.parent;\n\n    if (!parent) {\n      return null;\n    }\n\n    var nextChilds = parent.value.filter(function (target) {\n      return target !== commonParent;\n    });\n    nextChilds.push.apply(nextChilds, commonParent.value);\n    parent.value = nextChilds;\n    this.set(this.toTargetGroups(), this._targets);\n    return commonParent.toTargetGroups();\n  };\n\n  __proto._findParentGroup = function (element, range) {\n    if (!range.length) {\n      return this;\n    }\n\n    var single = this.map.get(element);\n\n    if (!single) {\n      return this;\n    }\n\n    var parent = single.parent;\n\n    while (parent) {\n      if (range.some(function (element) {\n        return parent.contains(element);\n      })) {\n        return parent;\n      }\n\n      parent = parent.parent;\n    }\n\n    return this;\n  };\n\n  return GroupManager;\n}(GroupArrayChild);\n\n\n//# sourceMappingURL=helper.esm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQG1vdmVhYmxlL2hlbHBlci9kaXN0L2hlbHBlci5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUMwRDs7QUFFMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsT0FBTztBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUIseURBQVE7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0EsV0FBVyxxREFBSTtBQUNmO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQSxTQUFTLHdEQUFPO0FBQ2hCO0FBQ0E7O0FBRUEsa0JBQWtCLHlEQUFRO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msd0RBQU87QUFDN0M7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047OztBQUdBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtB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QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVLHdEQUFPO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHdCQUF3Qix5REFBUTtBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGdDQUFnQyx3REFBTztBQUN2QztBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVLHdEQUFPO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQzs7QUFFK0U7QUFDaEYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LWFkbWluLy4vbm9kZV9tb2R1bGVzL0Btb3ZlYWJsZS9oZWxwZXIvZGlzdC9oZWxwZXIuZXNtLmpzPzI3YTIiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkNvcHlyaWdodCAoYykgRGF5YnJ1c2hcbm5hbWU6IEBtb3ZlYWJsZS9oZWxwZXJcbmxpY2Vuc2U6IE1JVFxuYXV0aG9yOiBEYXlicnVzaFxucmVwb3NpdG9yeTogaHR0cHM6Ly9naXRodWIuY29tL2RheWJydXNoL21vdmVhYmxlL2Jsb2IvbWFzdGVyL3BhY2thZ2VzL2hlbHBlclxudmVyc2lvbjogMC4xLjNcbiovXG5pbXBvcnQgeyBkZWVwRmxhdCwgZmluZCwgaXNBcnJheSB9IGZyb20gJ0BkYXlicnVzaC91dGlscyc7XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IHtcbiAgICBfX3Byb3RvX186IFtdXG4gIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikge1xuICAgIGQuX19wcm90b19fID0gYjtcbiAgfSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07XG4gIH07XG5cbiAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG59O1xuXG5mdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xuICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gIGV4dGVuZFN0YXRpY3MoZCwgYik7XG5cbiAgZnVuY3Rpb24gX18oKSB7XG4gICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7XG4gIH1cblxuICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59XG5mdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tLCBwYWNrKSB7XG4gIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XG4gICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XG59XG5cbnZhciBDaGlsZCA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIENoaWxkKHBhcmVudCkge1xuICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgIHRoaXMudHlwZSA9IFwic2luZ2xlXCI7XG4gICAgdGhpcy5kZXB0aCA9IDA7XG4gICAgdGhpcy5fc2NvcGUgPSBbXTtcblxuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIHRoaXMuZGVwdGggPSBwYXJlbnQuZGVwdGggKyAxO1xuICAgIH1cbiAgfVxuXG4gIHZhciBfX3Byb3RvID0gQ2hpbGQucHJvdG90eXBlO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX19wcm90bywgXCJzY29wZVwiLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnQ7XG5cbiAgICAgIGlmICghcGFyZW50IHx8IHBhcmVudC50eXBlID09PSBcInJvb3RcIikge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoW10sIHBhcmVudC5zY29wZSwgdHJ1ZSksIFtwYXJlbnQuaWRdLCBmYWxzZSk7XG4gICAgfSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG4gIHJldHVybiBDaGlsZDtcbn0oKTtcblxudmFyIEdyb3VwU2luZ2xlQ2hpbGQgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9zdXBlcikge1xuICBfX2V4dGVuZHMoR3JvdXBTaW5nbGVDaGlsZCwgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBHcm91cFNpbmdsZUNoaWxkKHBhcmVudCwgdmFsdWUpIHtcbiAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwYXJlbnQpIHx8IHRoaXM7XG5cbiAgICBfdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIF90aGlzLnR5cGUgPSBcInNpbmdsZVwiO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHJldHVybiBHcm91cFNpbmdsZUNoaWxkO1xufShDaGlsZCk7XG5cbnZhciBHcm91cEFycmF5Q2hpbGQgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9zdXBlcikge1xuICBfX2V4dGVuZHMoR3JvdXBBcnJheUNoaWxkLCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIEdyb3VwQXJyYXlDaGlsZCgpIHtcbiAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcblxuICAgIF90aGlzLnR5cGUgPSBcImdyb3VwXCI7XG4gICAgX3RoaXMudmFsdWUgPSBbXTtcbiAgICBfdGhpcy5pZCA9IFwiXCI7XG4gICAgX3RoaXMubWFwID0gbmV3IE1hcCgpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHZhciBfX3Byb3RvID0gR3JvdXBBcnJheUNoaWxkLnByb3RvdHlwZTtcblxuICBfX3Byb3RvLmNvbXBhcmUgPSBmdW5jdGlvbiAoZ3JvdXBzLCBjaGVja2VyKSB7XG4gICAgaWYgKGNoZWNrZXIgPT09IHZvaWQgMCkge1xuICAgICAgY2hlY2tlciA9IDA7XG4gICAgfVxuXG4gICAgdmFyIGVsZW1lbnRzID0gZGVlcEZsYXQoZ3JvdXBzKTtcbiAgICB2YXIgbWFwID0gdGhpcy5tYXA7XG4gICAgdmFyIGVsZW1lbnRzTGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoO1xuICAgIHZhciBtYXBTaXplID0gbWFwLnNpemU7XG4gICAgdmFyIHNpemVEaWZmID0gbWFwU2l6ZSAtIGVsZW1lbnRzTGVuZ3RoOyAvLyAxIHRoaXMgPiBncm91cHNcbiAgICAvLyAwIHRoaXMgPSBncm91cHNcbiAgICAvLyAtMSB0aGlzIDwgZ3JvdXBzXG5cbiAgICB2YXIgY291bnQgPSBlbGVtZW50cy5maWx0ZXIoZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBtYXAuaGFzKGVsZW1lbnQpO1xuICAgIH0pLmxlbmd0aDtcblxuICAgIGlmIChjaGVja2VyID4gMCAmJiBzaXplRGlmZiA+PSAwIHx8IGNoZWNrZXIgPT09IDAgJiYgc2l6ZURpZmYgPT09IDApIHtcbiAgICAgIHJldHVybiBlbGVtZW50c0xlbmd0aCA9PT0gY291bnQ7XG4gICAgfSBlbHNlIGlmIChjaGVja2VyIDwgMCAmJiBzaXplRGlmZiA8PSAwKSB7XG4gICAgICByZXR1cm4gbWFwU2l6ZSA9PT0gY291bnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIF9fcHJvdG8uaGFzID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIHJldHVybiB0aGlzLm1hcC5oYXModGFyZ2V0KTtcbiAgfTtcblxuICBfX3Byb3RvLmNvbnRhaW5zID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICBpZiAodGhpcy5oYXMoZWxlbWVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnZhbHVlLnNvbWUoZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICBpZiAoY2hpbGQudHlwZSA9PT0gXCJncm91cFwiKSB7XG4gICAgICAgIHJldHVybiBjaGlsZC5jb250YWlucyhlbGVtZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBfX3Byb3RvLmZpbmRDb250YWluZWRDaGlsZCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgcmV0dXJuIGZpbmQodGhpcy52YWx1ZSwgZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICBpZiAoY2hpbGQudHlwZSA9PT0gXCJzaW5nbGVcIikge1xuICAgICAgICByZXR1cm4gY2hpbGQudmFsdWUgPT09IGVsZW1lbnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gY2hpbGQuY29udGFpbnMoZWxlbWVudCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG4gIC8qKlxuICAgKiBFeGFjdCBncm91cCBjb250YWluaW5nIHRhcmdldHNcbiAgICovXG5cblxuICBfX3Byb3RvLmZpbmRFeGFjdENoaWxkID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIHZhciBtYXAgPSB0aGlzLm1hcDtcblxuICAgIGlmICghaXNBcnJheSh0YXJnZXQpKSB7XG4gICAgICByZXR1cm4gbWFwLmdldCh0YXJnZXQpO1xuICAgIH1cblxuICAgIHZhciBmbGF0dGVkID0gZGVlcEZsYXQodGFyZ2V0KTtcbiAgICB2YXIgbGVuZ3RoID0gZmxhdHRlZC5sZW5ndGg7XG4gICAgdmFyIHNpbmdsZSA9IG1hcC5nZXQoZmxhdHRlZFswXSk7XG5cbiAgICBpZiAoIXNpbmdsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBwYXJlbnQgPSBzaW5nbGUucGFyZW50O1xuXG4gICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgaWYgKHBhcmVudC5tYXAuc2l6ZSA+PSBsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHBhcmVudDtcbiAgICAgIH1cblxuICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcbiAgICB9XG5cbiAgICByZXR1cm47XG4gIH07XG5cbiAgX19wcm90by5maW5kQ29tbW9uUGFyZW50ID0gZnVuY3Rpb24gKHRhcmdldHMpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIGRlcHRoID0gSW5maW5pdHk7XG4gICAgdmFyIGNoaWxkcyA9IHRhcmdldHMubWFwKGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgIHJldHVybiBfdGhpcy5maW5kRXhhY3RDaGlsZCh0YXJnZXQpO1xuICAgIH0pO1xuICAgIGNoaWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgaWYgKCFjaGlsZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGRlcHRoID0gTWF0aC5taW4oY2hpbGQuZGVwdGgsIGRlcHRoKTtcbiAgICB9KTtcblxuICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKCkge1xuICAgICAgLS1kZXB0aDtcbiAgICAgIGNoaWxkcyA9IGNoaWxkcy5tYXAoZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgIHZhciBwYXJlbnQgPSBjaGlsZDtcblxuICAgICAgICB3aGlsZSAocGFyZW50ICYmIHBhcmVudC5kZXB0aCAhPT0gZGVwdGgpIHtcbiAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBhcmVudDtcbiAgICAgIH0pO1xuICAgICAgdmFyIGZpcnN0Q2hpbGQgPSBjaGlsZHMuZmluZChmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgcmV0dXJuIGNoaWxkO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICghZmlyc3RDaGlsZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbHVlOiB0aGlzXzFcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoaWxkcy5ldmVyeShmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgcmV0dXJuICFjaGlsZCB8fCBjaGlsZCA9PT0gZmlyc3RDaGlsZDtcbiAgICAgIH0pKSB7XG4gICAgICAgIHJldHVybiBcImJyZWFrXCI7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciB0aGlzXzEgPSB0aGlzO1xuXG4gICAgd2hpbGUgKGRlcHRoKSB7XG4gICAgICB2YXIgc3RhdGVfMSA9IF9sb29wXzEoKTtcblxuICAgICAgaWYgKHR5cGVvZiBzdGF0ZV8xID09PSBcIm9iamVjdFwiKSByZXR1cm4gc3RhdGVfMS52YWx1ZTtcbiAgICAgIGlmIChzdGF0ZV8xID09PSBcImJyZWFrXCIpIGJyZWFrO1xuICAgIH1cblxuICAgIHZhciBjb21tb25QYXJlbnQgPSBjaGlsZHMuZmluZChmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgIHJldHVybiBjaGlsZDtcbiAgICB9KTtcbiAgICByZXR1cm4gY29tbW9uUGFyZW50IHx8IHRoaXM7XG4gIH07XG5cbiAgX19wcm90by5maW5kTmV4dENoaWxkID0gZnVuY3Rpb24gKHRhcmdldCwgcmFuZ2UsIGlzRXhhY3QpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgaWYgKHJhbmdlID09PSB2b2lkIDApIHtcbiAgICAgIHJhbmdlID0gdGhpcy50b1RhcmdldEdyb3VwcygpO1xuICAgIH1cblxuICAgIGlmIChpc0V4YWN0ID09PSB2b2lkIDApIHtcbiAgICAgIGlzRXhhY3QgPSB0cnVlO1xuICAgIH1cblxuICAgIHZhciBuZXh0Q2hpbGQgPSBudWxsO1xuICAgIHZhciBsZW5ndGggPSByYW5nZS5sZW5ndGg7XG4gICAgcmFuZ2Uuc29tZShmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgIGlmICghaXNFeGFjdCAmJiBsZW5ndGggPT09IDEgJiYgaXNBcnJheShjaGlsZCkpIHtcbiAgICAgICAgbmV4dENoaWxkID0gX3RoaXMuZmluZE5leHRDaGlsZCh0YXJnZXQsIGNoaWxkKTtcbiAgICAgICAgcmV0dXJuIG5leHRDaGlsZDtcbiAgICAgIH1cblxuICAgICAgdmFyIG5leHRHcm91cENoaWxkID0gX3RoaXMuZmluZEV4YWN0Q2hpbGQoY2hpbGQpO1xuXG4gICAgICBpZiAoIW5leHRHcm91cENoaWxkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKFwibWFwXCIgaW4gbmV4dEdyb3VwQ2hpbGQpIHtcbiAgICAgICAgaWYgKG5leHRHcm91cENoaWxkLm1hcC5oYXModGFyZ2V0KSkge1xuICAgICAgICAgIG5leHRDaGlsZCA9IG5leHRHcm91cENoaWxkO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG5leHRDaGlsZDtcbiAgfTtcblxuICBfX3Byb3RvLmZpbmROZXh0RXhhY3RDaGlsZCA9IGZ1bmN0aW9uICh0YXJnZXQsIHNlbGVjdGVkLCByYW5nZSkge1xuICAgIGlmIChyYW5nZSA9PT0gdm9pZCAwKSB7XG4gICAgICByYW5nZSA9IHRoaXMudG9UYXJnZXRHcm91cHMoKTtcbiAgICB9IC8vIFtbMSwgMl1dID0+IGdyb3VwKFsxLCAyXSkgZXhhY3RcbiAgICAvLyBbW1sxLCAyXSwgM11dID0+IGdyb3VwKFsxLCAyXSlcblxuXG4gICAgdmFyIG5leHRDaGlsZCA9IHRoaXMuZmluZE5leHRDaGlsZCh0YXJnZXQsIHJhbmdlLCB0cnVlKTtcblxuICAgIGlmICghbmV4dENoaWxkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAobmV4dENoaWxkLmNvbXBhcmUoc2VsZWN0ZWQsIC0xKSkge1xuICAgICAgcmV0dXJuIG5leHRDaGlsZDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcbiAgLyoqXG4gICAqIEZpbmRzIGEgZ3JvdXAgdGhhdCBkb2VzIG5vdCBvdmVybGFwIHdpdGhpbiB0aGUgcmFuZ2UgYW5kIGluY2x1ZGVzIHRoZSB0YXJnZXQuXG4gICAqL1xuXG5cbiAgX19wcm90by5maW5kUHVyZUNoaWxkID0gZnVuY3Rpb24gKHRhcmdldCwgcmFuZ2UpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIG5leHRHcm91cENoaWxkID0gbnVsbDtcbiAgICB2YXIgY2hpbGRTZWxlY3RlZCA9IHJhbmdlLmZpbHRlcihmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgcmV0dXJuIF90aGlzLmhhcyhlbGVtZW50KTtcbiAgICB9KTtcblxuICAgIGlmICghY2hpbGRTZWxlY3RlZC5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHRoaXMudmFsdWUuc29tZShmdW5jdGlvbiAobmV4dENoaWxkKSB7XG4gICAgICBpZiAobmV4dENoaWxkLnR5cGUgIT09IFwic2luZ2xlXCIgJiYgbmV4dENoaWxkLmhhcyh0YXJnZXQpKSB7XG4gICAgICAgIG5leHRHcm91cENoaWxkID0gbmV4dENoaWxkLmZpbmRQdXJlQ2hpbGQodGFyZ2V0LCBjaGlsZFNlbGVjdGVkKTtcblxuICAgICAgICBpZiAobmV4dEdyb3VwQ2hpbGQpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBuZXh0R3JvdXBDaGlsZDtcbiAgfTtcblxuICBfX3Byb3RvLmZpbmROZXh0UHVyZUNoaWxkID0gZnVuY3Rpb24gKHRhcmdldCwgcmFuZ2UpIHtcbiAgICB2YXIgbmV4dENoaWxkID0gdGhpcy5maW5kTmV4dENoaWxkKHRhcmdldCk7XG5cbiAgICBpZiAobmV4dENoaWxkKSB7XG4gICAgICByZXR1cm4gbmV4dENoaWxkLmZpbmRQdXJlQ2hpbGQodGFyZ2V0LCByYW5nZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgX19wcm90by50b1RhcmdldEdyb3VwcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZS5tYXAoZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICBpZiAoY2hpbGQudHlwZSA9PT0gXCJzaW5nbGVcIikge1xuICAgICAgICByZXR1cm4gY2hpbGQudmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gY2hpbGQudG9UYXJnZXRHcm91cHMoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBfX3Byb3RvLmZpbmRBcnJheUNoaWxkID0gZnVuY3Rpb24gKHRhcmdldHMpIHtcbiAgICB2YXIgdmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgIHZhciByZXN1bHQgPSBmYWxzZTtcblxuICAgIGlmICh0aGlzLnR5cGUgIT09IFwicm9vdFwiKSB7XG4gICAgICByZXN1bHQgPSB2YWx1ZS5ldmVyeShmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IFwic2luZ2xlXCIpIHtcbiAgICAgICAgICByZXR1cm4gdGFyZ2V0cy5zb21lKGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBjaGlsZC52YWx1ZSA9PT0gdGFyZ2V0O1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0YXJnZXRzLnNvbWUoZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuIGlzQXJyYXkodGFyZ2V0KSAmJiBjaGlsZC5maW5kQXJyYXlDaGlsZCh0YXJnZXQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTsgLy8gcmVzdWx0ID0gdGFyZ2V0cy5ldmVyeSh0YXJnZXQgPT4ge1xuICAgICAgLy8gICAgIGlmIChpc0FycmF5KHRhcmdldCkpIHtcbiAgICAgIC8vICAgICAgICAgcmV0dXJuIHZhbHVlLnNvbWUoY2hpbGQgPT4ge1xuICAgICAgLy8gICAgICAgICAgICAgcmV0dXJuIGNoaWxkLnR5cGUgPT09IFwiZ3JvdXBcIiAmJiBjaGlsZC5maW5kQXJyYXlDaGlsZCh0YXJnZXQpO1xuICAgICAgLy8gICAgICAgICB9KTtcbiAgICAgIC8vICAgICB9IGVsc2Uge1xuICAgICAgLy8gICAgICAgICByZXR1cm4gbWFwLmdldCh0YXJnZXQpO1xuICAgICAgLy8gICAgIH1cbiAgICAgIC8vIH0pO1xuICAgIH1cblxuICAgIGlmIChyZXN1bHQgJiYgdGFyZ2V0cy5sZW5ndGggPT09IHZhbHVlLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBjaGlsZFJlc3VsdF8xID0gbnVsbDtcbiAgICAgIHZhbHVlLnNvbWUoZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgIGlmIChjaGlsZC50eXBlID09PSBcImdyb3VwXCIpIHtcbiAgICAgICAgICBjaGlsZFJlc3VsdF8xID0gY2hpbGQuZmluZEFycmF5Q2hpbGQodGFyZ2V0cyk7XG4gICAgICAgICAgcmV0dXJuIGNoaWxkUmVzdWx0XzE7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGNoaWxkUmVzdWx0XzE7XG4gICAgfVxuICB9O1xuXG4gIF9fcHJvdG8uZ3JvdXBCeVBlcmZlY3QgPSBmdW5jdGlvbiAoc2VsZWN0ZWQpIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZS5maWx0ZXIoZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICBpZiAoY2hpbGQudHlwZSAhPT0gXCJzaW5nbGVcIikge1xuICAgICAgICByZXR1cm4gY2hpbGQuY29tcGFyZShzZWxlY3RlZCwgLTEpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZWN0ZWQuaW5kZXhPZihjaGlsZC52YWx1ZSkgPiAtMTtcbiAgICB9KTtcbiAgfTtcblxuICBfX3Byb3RvLmFkZCA9IGZ1bmN0aW9uICh0YXJnZXRzKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBfYSA9IHRoaXMsXG4gICAgICAgIHZhbHVlID0gX2EudmFsdWUsXG4gICAgICAgIG1hcCA9IF9hLm1hcDtcblxuICAgIHZhciBkZXB0aCA9IHRoaXMuZGVwdGg7XG4gICAgdGFyZ2V0cy5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgaWYgKFwiZ3JvdXBJZFwiIGluIGNoaWxkKSB7XG4gICAgICAgIHZhciBncm91cCA9IG5ldyBHcm91cEFycmF5Q2hpbGQoX3RoaXMpO1xuICAgICAgICBncm91cC5pZCA9IGNoaWxkLmdyb3VwSWQ7XG4gICAgICAgIGdyb3VwLmRlcHRoID0gZGVwdGggKyAxO1xuICAgICAgICB2YWx1ZS5wdXNoKGdyb3VwKTtcbiAgICAgICAgZ3JvdXAuYWRkKGNoaWxkLmNoaWxkcmVuKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNBcnJheShjaGlsZCkpIHtcbiAgICAgICAgdmFyIGdyb3VwID0gbmV3IEdyb3VwQXJyYXlDaGlsZChfdGhpcyk7XG4gICAgICAgIGdyb3VwLmRlcHRoID0gZGVwdGggKyAxO1xuICAgICAgICB2YWx1ZS5wdXNoKGdyb3VwKTtcbiAgICAgICAgZ3JvdXAuYWRkKGNoaWxkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBlbGVtZW50ID0gXCJjdXJyZW50XCIgaW4gY2hpbGQgPyBjaGlsZC5jdXJyZW50IDogY2hpbGQ7XG4gICAgICAgIHZhciBzaW5nbGUgPSBuZXcgR3JvdXBTaW5nbGVDaGlsZChfdGhpcywgZWxlbWVudCk7XG4gICAgICAgIHNpbmdsZS5kZXB0aCA9IGRlcHRoICsgMTtcbiAgICAgICAgdmFsdWUucHVzaChzaW5nbGUpO1xuICAgICAgICBtYXAuc2V0KGVsZW1lbnQsIHNpbmdsZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdmFsdWUuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgIGlmIChjaGlsZC50eXBlID09PSBcInNpbmdsZVwiKSB7XG4gICAgICAgIG1hcC5zZXQoY2hpbGQudmFsdWUsIGNoaWxkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoaWxkLm1hcC5mb3JFYWNoKGZ1bmN0aW9uIChuZXh0Q2hpbGQsIGVsZW1lbnQpIHtcbiAgICAgICAgICBtYXAuc2V0KGVsZW1lbnQsIG5leHRDaGlsZCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBwYXJlbnQ7XG4gIH07XG5cbiAgcmV0dXJuIEdyb3VwQXJyYXlDaGlsZDtcbn0oQ2hpbGQpO1xuXG5mdW5jdGlvbiB0b1RhcmdldExpc3QocmF3KSB7XG4gIGZ1bmN0aW9uIHRhcmdldHMoY2hpbGRzKSB7XG4gICAgaWYgKGNoaWxkcyA9PT0gdm9pZCAwKSB7XG4gICAgICBjaGlsZHMgPSBbXTtcbiAgICB9XG5cbiAgICB2YXIgYXJyID0gW107XG4gICAgY2hpbGRzLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICBpZiAoY2hpbGQudHlwZSA9PT0gXCJzaW5nbGVcIikge1xuICAgICAgICBhcnIucHVzaChjaGlsZC52YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcnIucHVzaCh0YXJnZXRzKGNoaWxkLnZhbHVlKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcmF3OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gcmF3O1xuICAgIH0sXG4gICAgdGFyZ2V0czogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRhcmdldHModGhpcy5yYXcoKSk7XG4gICAgfSxcbiAgICBmbGF0dGVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZGVlcEZsYXQodGhpcy50YXJnZXRzKCkpO1xuICAgIH1cbiAgfTtcbn1cblxudmFyIEdyb3VwTWFuYWdlciA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhHcm91cE1hbmFnZXIsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gR3JvdXBNYW5hZ2VyKHRhcmdldEdyb3VwcywgdGFyZ2V0cykge1xuICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG5cbiAgICBfdGhpcy50eXBlID0gXCJyb290XCI7XG4gICAgX3RoaXMuX3RhcmdldHMgPSBbXTtcblxuICAgIF90aGlzLnNldCh0YXJnZXRHcm91cHMsIHRhcmdldHMpO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgdmFyIF9fcHJvdG8gPSBHcm91cE1hbmFnZXIucHJvdG90eXBlO1xuXG4gIF9fcHJvdG8uc2V0ID0gZnVuY3Rpb24gKHRhcmdldEdyb3VwcywgdGFyZ2V0cykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBpZiAodGFyZ2V0cyA9PT0gdm9pZCAwKSB7XG4gICAgICB0YXJnZXRzID0gW107XG4gICAgfVxuXG4gICAgdGhpcy5tYXAgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy52YWx1ZSA9IFtdO1xuICAgIHZhciBtYXAgPSB0aGlzLm1hcDtcbiAgICB2YXIgdmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgIHRoaXMuYWRkKHRhcmdldEdyb3Vwcyk7XG4gICAgdGFyZ2V0cy5mb3JFYWNoKGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgIGlmIChtYXAuaGFzKHRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2luZ2xlID0gbmV3IEdyb3VwU2luZ2xlQ2hpbGQoX3RoaXMsIHRhcmdldCk7XG4gICAgICBzaW5nbGUuZGVwdGggPSAxO1xuICAgICAgdmFsdWUucHVzaChzaW5nbGUpO1xuICAgICAgbWFwLnNldCh0YXJnZXQsIHNpbmdsZSk7XG4gICAgfSk7XG4gICAgdGhpcy5fdGFyZ2V0cyA9IHRhcmdldHM7XG4gIH07XG5cbiAgX19wcm90by5zZWxlY3RTdWJDaGlsZHMgPSBmdW5jdGlvbiAodGFyZ2V0cywgdGFyZ2V0KSB7XG4gICAgdmFyIHJvb3QgPSB0aGlzO1xuICAgIHZhciBuZXh0Q2hpbGQgPSByb290LmZpbmROZXh0Q2hpbGQodGFyZ2V0LCB0YXJnZXRzLCBmYWxzZSk7XG4gICAgdmFyIHRhcmdldENoaWxkID0gcm9vdC5tYXAuZ2V0KHRhcmdldCk7XG4gICAgdmFyIG5leHRDaGlsZHMgPSBbXTtcblxuICAgIGlmIChuZXh0Q2hpbGQpIHtcbiAgICAgIG5leHRDaGlsZHMgPSBbbmV4dENoaWxkXTtcbiAgICB9IGVsc2UgaWYgKHRhcmdldENoaWxkKSB7XG4gICAgICBuZXh0Q2hpbGRzID0gW3RhcmdldENoaWxkXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV4dENoaWxkcyA9IFtdO1xuICAgIH1cblxuICAgIHJldHVybiB0b1RhcmdldExpc3QobmV4dENoaWxkcyk7XG4gIH07XG5cbiAgX19wcm90by5zZWxlY3RTaW5nbGVDaGlsZHMgPSBmdW5jdGlvbiAodGFyZ2V0cywgYWRkZWQsIHJlbW92ZWQpIHtcbiAgICB2YXIgbmV4dFRhcmdldHMgPSBfX3NwcmVhZEFycmF5KFtdLCB0YXJnZXRzLCB0cnVlKTsgLy8gZ3JvdXAgY2FuJ3QgYmUgYWRkZWQsIHJlbW92ZWQuXG5cblxuICAgIHJlbW92ZWQuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgdmFyIGluZGV4ID0gbmV4dFRhcmdldHMuaW5kZXhPZihlbGVtZW50KTtcblxuICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgbmV4dFRhcmdldHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9KTsgLy8gVGFyZ2V0cyBjYW4gYmUgYWRkZWQgb25lIGJ5IG9uZVxuXG4gICAgYWRkZWQuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgbmV4dFRhcmdldHMucHVzaChlbGVtZW50KTtcbiAgICB9KTtcbiAgICByZXR1cm4gdG9UYXJnZXRMaXN0KHRoaXMudG9DaGlsZHMobmV4dFRhcmdldHMpKTtcbiAgfTtcblxuICBfX3Byb3RvLnNlbGVjdENvbXBsZXRlZENoaWxkcyA9IGZ1bmN0aW9uICh0YXJnZXRzLCBhZGRlZCwgcmVtb3ZlZCwgY29udGludWVTZWxlY3QpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIG5leHRUYXJnZXRzID0gX19zcHJlYWRBcnJheShbXSwgdGFyZ2V0cywgdHJ1ZSk7XG5cbiAgICB2YXIgc3RhcnRTZWxlY3RlZCA9IGRlZXBGbGF0KG5leHRUYXJnZXRzKTsgLy8gZ3JvdXAgY2FuIGJlIGFkZGVkLCByZW1vdmVkLlxuXG4gICAgcmVtb3ZlZC5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAvLyBTaW5nbGUgVGFyZ2V0XG4gICAgICB2YXIgaW5kZXggPSBuZXh0VGFyZ2V0cy5pbmRleE9mKGVsZW1lbnQpO1xuXG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAvLyBzaW5nbGUgdGFyZ2V0IG9yIGdyb3VwXG4gICAgICAgIG5leHRUYXJnZXRzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gR3JvdXAgVGFyZ2V0XG5cblxuICAgICAgdmFyIHJlbW92ZWRDaGlsZCA9IGNvbnRpbnVlU2VsZWN0IC8vIEZpbmRzIHRoZSBuZWFyZXN0IGNoaWxkIGZvciBlbGVtZW50IGFuZCBuZXh0VGFyZ2V0cy5cbiAgICAgID8gX3RoaXMuZmluZE5leHRDaGlsZChlbGVtZW50LCBuZXh0VGFyZ2V0cykgLy8gRmluZCB0aGUgbmVhcmVzdCBleGFjdCBjaGlsZCBmb3IgZWxlbWVudCwgYWxsIHJlbW92ZWQgYW5kIG5leHRUYXJnZXRzLlxuICAgICAgOiBfdGhpcy5maW5kTmV4dEV4YWN0Q2hpbGQoZWxlbWVudCwgcmVtb3ZlZCwgbmV4dFRhcmdldHMpO1xuXG4gICAgICBpZiAocmVtb3ZlZENoaWxkKSB7XG4gICAgICAgIHZhciBncm91cEluZGV4ID0gbmV4dFRhcmdldHMuZmluZEluZGV4KGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgICByZXR1cm4gaXNBcnJheSh0YXJnZXQpICYmIHJlbW92ZWRDaGlsZC5jb21wYXJlKHRhcmdldCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChncm91cEluZGV4ID4gLTEpIHtcbiAgICAgICAgICBuZXh0VGFyZ2V0cy5zcGxpY2UoZ3JvdXBJbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBhZGRlZC5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICB2YXIgcGFyZW50R3JvdXAgPSBfdGhpcy5fZmluZFBhcmVudEdyb3VwKGVsZW1lbnQsIHN0YXJ0U2VsZWN0ZWQpO1xuXG4gICAgICB2YXIgbmV4dENoaWxkID0gcGFyZW50R3JvdXAuZmluZENvbnRhaW5lZENoaWxkKGVsZW1lbnQpO1xuXG4gICAgICBpZiAoKG5leHRDaGlsZCA9PT0gbnVsbCB8fCBuZXh0Q2hpbGQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5leHRDaGlsZC50eXBlKSA9PT0gXCJncm91cFwiKSB7XG4gICAgICAgIG5leHRUYXJnZXRzLnB1c2gobmV4dENoaWxkLnRvVGFyZ2V0R3JvdXBzKCkpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG5leHRUYXJnZXRzLnB1c2goZWxlbWVudCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRvVGFyZ2V0TGlzdCh0aGlzLnRvQ2hpbGRzKG5leHRUYXJnZXRzKSk7XG4gIH07XG5cbiAgX19wcm90by5zZWxlY3RTYW1lRGVwdGhDaGlsZHMgPSBmdW5jdGlvbiAodGFyZ2V0cywgYWRkZWQsIHJlbW92ZWQsIGNvbnRpbnVlU2VsZWN0KSB7XG4gICAgdmFyIG5leHRUYXJnZXRzID0gX19zcHJlYWRBcnJheShbXSwgdGFyZ2V0cywgdHJ1ZSk7XG5cbiAgICB2YXIgY29tbW9uUGFyZW50ID0gdGhpcy5maW5kQ29tbW9uUGFyZW50KG5leHRUYXJnZXRzKTtcbiAgICByZW1vdmVkLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgIC8vIFNpbmdsZSBUYXJnZXRcbiAgICAgIHZhciBpbmRleCA9IG5leHRUYXJnZXRzLmluZGV4T2YoZWxlbWVudCk7XG5cbiAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIC8vIHNpbmdsZSB0YXJnZXQgb3IgZ3JvdXBcbiAgICAgICAgbmV4dFRhcmdldHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVtb3ZlZENoaWxkID0gY29udGludWVTZWxlY3QgLy8gRmluZCB0aGUgbmVhcmVzdCBleGFjdCBjaGlsZCBmb3IgZWxlbWVudCwgYWxsIHJlbW92ZWQgYW5kIG5leHRUYXJnZXRzLlxuICAgICAgPyBjb21tb25QYXJlbnQuZmluZE5leHRFeGFjdENoaWxkKGVsZW1lbnQsIHJlbW92ZWQsIG5leHRUYXJnZXRzKSAvLyBGaW5kcyB0aGUgbmVhcmVzdCBjaGlsZCBmb3IgZWxlbWVudCBhbmQgbmV4dFRhcmdldHMuXG4gICAgICA6IGNvbW1vblBhcmVudC5maW5kTmV4dENoaWxkKGVsZW1lbnQsIG5leHRUYXJnZXRzLCB0cnVlKTtcblxuICAgICAgaWYgKHJlbW92ZWRDaGlsZCkge1xuICAgICAgICB2YXIgZ3JvdXBJbmRleCA9IG5leHRUYXJnZXRzLmZpbmRJbmRleChmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgICAgcmV0dXJuIGlzQXJyYXkodGFyZ2V0KSAmJiByZW1vdmVkQ2hpbGQuY29tcGFyZSh0YXJnZXQpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZ3JvdXBJbmRleCA+IC0xKSB7XG4gICAgICAgICAgbmV4dFRhcmdldHMuc3BsaWNlKGdyb3VwSW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgdmFyIGFkZGVkQ2hpbGRyZW4gPSBjb21tb25QYXJlbnQuZ3JvdXBCeVBlcmZlY3QoYWRkZWQpO1xuICAgIGFkZGVkQ2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgIGlmIChjaGlsZC50eXBlID09PSBcInNpbmdsZVwiKSB7XG4gICAgICAgIG5leHRUYXJnZXRzLnB1c2goY2hpbGQudmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGdyb3VwSW5kZXggPSBuZXh0VGFyZ2V0cy5maW5kSW5kZXgoZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgIHJldHVybiBpc0FycmF5KHRhcmdldCkgJiYgY2hpbGQuY29tcGFyZSh0YXJnZXQsIDEpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZ3JvdXBJbmRleCA+IC0xKSB7XG4gICAgICAgICAgbmV4dFRhcmdldHMuc3BsaWNlKGdyb3VwSW5kZXgsIDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgbmV4dFRhcmdldHMucHVzaChjaGlsZC50b1RhcmdldEdyb3VwcygpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdG9UYXJnZXRMaXN0KHRoaXMudG9DaGlsZHMobmV4dFRhcmdldHMpKTtcbiAgfTtcblxuICBfX3Byb3RvLnRvQ2hpbGRzID0gZnVuY3Rpb24gKHRhcmdldHMpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIGNoaWxkcyA9IFtdO1xuICAgIHRhcmdldHMuZm9yRWFjaChmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICBpZiAoaXNBcnJheSh0YXJnZXQpKSB7XG4gICAgICAgIHZhciBhcnJheUNoaWxkID0gX3RoaXMuZmluZEFycmF5Q2hpbGQodGFyZ2V0KTtcblxuICAgICAgICBpZiAoYXJyYXlDaGlsZCkge1xuICAgICAgICAgIGNoaWxkcy5wdXNoKGFycmF5Q2hpbGQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgc2luZ2xlID0gX3RoaXMubWFwLmdldCh0YXJnZXQpO1xuXG4gICAgICAgIGlmIChzaW5nbGUpIHtcbiAgICAgICAgICBjaGlsZHMucHVzaChzaW5nbGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoaWxkcy5wdXNoKG5ldyBHcm91cFNpbmdsZUNoaWxkKF90aGlzLCB0YXJnZXQpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjaGlsZHM7XG4gIH07XG5cbiAgX19wcm90by50b1NpbmdsZUNoaWxkID0gZnVuY3Rpb24gKGVsZW1lbnQsIGlzQXV0bykge1xuICAgIHZhciB2YWx1ZSA9IHRoaXMubWFwLmdldChlbGVtZW50KTtcblxuICAgIGlmIChpc0F1dG8pIHtcbiAgICAgIHJldHVybiB2YWx1ZSB8fCBuZXcgR3JvdXBTaW5nbGVDaGlsZCh0aGlzLCBlbGVtZW50KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG5cbiAgX19wcm90by5maW5kQXJyYXlDaGlsZEJ5SWQgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICB2YXIgdmFsdWUgPSBudWxsO1xuICAgIHRoaXMudmFsdWUuc29tZShmdW5jdGlvbiBmaW5kKGNoaWxkKSB7XG4gICAgICBpZiAoY2hpbGQudHlwZSAhPT0gXCJzaW5nbGVcIikge1xuICAgICAgICBpZiAoY2hpbGQuaWQgPT09IGlkKSB7XG4gICAgICAgICAgdmFsdWUgPSBjaGlsZDtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gY2hpbGQudmFsdWUuc29tZShmaW5kKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcblxuICBfX3Byb3RvLmdyb3VwID0gZnVuY3Rpb24gKHRhcmdldHMsIGZsYXR0ZW4pIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIGNvbW1vblBhcmVudCA9IHRoaXMuZmluZENvbW1vblBhcmVudCh0YXJnZXRzKTtcbiAgICB2YXIgZ3JvdXBDaGlsZHMgPSB0YXJnZXRzLm1hcChmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICBpZiAoaXNBcnJheSh0YXJnZXQpKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5maW5kQXJyYXlDaGlsZCh0YXJnZXQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3RoaXMudG9TaW5nbGVDaGlsZCh0YXJnZXQpO1xuICAgIH0pO1xuICAgIHZhciBpc0dyb3VwYWJsZSA9IGdyb3VwQ2hpbGRzLmV2ZXJ5KGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgcmV0dXJuIChjaGlsZCA9PT0gbnVsbCB8fCBjaGlsZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2hpbGQucGFyZW50KSA9PT0gY29tbW9uUGFyZW50O1xuICAgIH0pO1xuXG4gICAgaWYgKCFpc0dyb3VwYWJsZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIGdyb3VwID0gbmV3IEdyb3VwQXJyYXlDaGlsZChjb21tb25QYXJlbnQpO1xuICAgIHZhciBuZXh0Q2hpbGRzID0gY29tbW9uUGFyZW50LnZhbHVlLmZpbHRlcihmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICByZXR1cm4gZ3JvdXBDaGlsZHMuaW5kZXhPZih0YXJnZXQpID09PSAtMTtcbiAgICB9KTtcbiAgICBuZXh0Q2hpbGRzLnVuc2hpZnQoZ3JvdXApO1xuICAgIGdyb3VwLmFkZChmbGF0dGVuID8gZGVlcEZsYXQodGFyZ2V0cykgOiB0YXJnZXRzKTtcbiAgICBjb21tb25QYXJlbnQudmFsdWUgPSBuZXh0Q2hpbGRzO1xuICAgIHRoaXMuc2V0KHRoaXMudG9UYXJnZXRHcm91cHMoKSwgdGhpcy5fdGFyZ2V0cyk7XG4gICAgcmV0dXJuIGdyb3VwLnRvVGFyZ2V0R3JvdXBzKCk7XG4gIH07XG5cbiAgX19wcm90by51bmdyb3VwID0gZnVuY3Rpb24gKHRhcmdldHMpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgaWYgKHRhcmdldHMubGVuZ3RoID09PSAxICYmIGlzQXJyYXkodGFyZ2V0c1swXSkpIHtcbiAgICAgIHRhcmdldHMgPSB0YXJnZXRzWzBdO1xuICAgIH1cblxuICAgIHZhciBjb21tb25QYXJlbnQgPSB0aGlzLmZpbmRDb21tb25QYXJlbnQodGFyZ2V0cyk7XG4gICAgdmFyIGdyb3VwQ2hpbGRzID0gdGFyZ2V0cy5tYXAoZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgaWYgKGlzQXJyYXkodGFyZ2V0KSkge1xuICAgICAgICByZXR1cm4gX3RoaXMuZmluZEFycmF5Q2hpbGQodGFyZ2V0KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF90aGlzLnRvU2luZ2xlQ2hpbGQodGFyZ2V0KTtcbiAgICB9KTtcbiAgICB2YXIgaXNHcm91cGFibGUgPSBjb21tb25QYXJlbnQudmFsdWUuZXZlcnkoZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICByZXR1cm4gZ3JvdXBDaGlsZHMuaW5kZXhPZihjaGlsZCkgPiAtMTtcbiAgICB9KTtcblxuICAgIGlmICghaXNHcm91cGFibGUgfHwgY29tbW9uUGFyZW50ID09PSB0aGlzKSB7XG4gICAgICAvLyBoYXMgbm8gZ3JvdXBcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBwYXJlbnQgPSBjb21tb25QYXJlbnQucGFyZW50O1xuXG4gICAgaWYgKCFwYXJlbnQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBuZXh0Q2hpbGRzID0gcGFyZW50LnZhbHVlLmZpbHRlcihmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICByZXR1cm4gdGFyZ2V0ICE9PSBjb21tb25QYXJlbnQ7XG4gICAgfSk7XG4gICAgbmV4dENoaWxkcy5wdXNoLmFwcGx5KG5leHRDaGlsZHMsIGNvbW1vblBhcmVudC52YWx1ZSk7XG4gICAgcGFyZW50LnZhbHVlID0gbmV4dENoaWxkcztcbiAgICB0aGlzLnNldCh0aGlzLnRvVGFyZ2V0R3JvdXBzKCksIHRoaXMuX3RhcmdldHMpO1xuICAgIHJldHVybiBjb21tb25QYXJlbnQudG9UYXJnZXRHcm91cHMoKTtcbiAgfTtcblxuICBfX3Byb3RvLl9maW5kUGFyZW50R3JvdXAgPSBmdW5jdGlvbiAoZWxlbWVudCwgcmFuZ2UpIHtcbiAgICBpZiAoIXJhbmdlLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgdmFyIHNpbmdsZSA9IHRoaXMubWFwLmdldChlbGVtZW50KTtcblxuICAgIGlmICghc2luZ2xlKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB2YXIgcGFyZW50ID0gc2luZ2xlLnBhcmVudDtcblxuICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgIGlmIChyYW5nZS5zb21lKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBwYXJlbnQuY29udGFpbnMoZWxlbWVudCk7XG4gICAgICB9KSkge1xuICAgICAgICByZXR1cm4gcGFyZW50O1xuICAgICAgfVxuXG4gICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHJldHVybiBHcm91cE1hbmFnZXI7XG59KEdyb3VwQXJyYXlDaGlsZCk7XG5cbmV4cG9ydCB7IENoaWxkLCBHcm91cEFycmF5Q2hpbGQsIEdyb3VwTWFuYWdlciwgR3JvdXBTaW5nbGVDaGlsZCwgdG9UYXJnZXRMaXN0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oZWxwZXIuZXNtLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@moveable/helper/dist/helper.esm.js\n");

/***/ })

};
;